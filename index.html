<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#000000" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">

  <title>Don Parietto</title>

  <link rel=" stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&display=swap" rel="stylesheet">
  <link rel=" stylesheet" href="./style.css" />
</head>

<body>

  <div class="container">

    <header>
      <img src="./assets/skull.png" alt="Boney the skeleton mascot">
      <h1>Este es Don Parietto</h1>
      <h3>¡No termines como él!</h3>
    </header>
    <main>
      <p id="warning-prediction">
        <span class="loading-text"> Loading </span>
      </p>
    </main>
  </div>

  <script src="./scripts.js"></script>
<style>
/* keep this minimal and in the page so it loads before the script runs */
html, body {
    margin: 0;
    padding: 0;
    /* create a 1px scrollable area */
    min-height: calc(100vh + 1px);
}
body.lock-scroll {
    /* lock the visual content in place while preserving layout */
    position: fixed;
    width: 100%;
    left: 0;
    /* top will be set dynamically to preserve visual position */
    overflow: hidden;
}
</style>

<script>
/*
  Auto-scroll to hide Safari toolbar with retries.
  Add comments in code as you prefer.
*/
(function () {
    // Try up to this many attempts
    const MAX_ATTEMPTS = 12;
    const INTERVAL = 80; // ms between attempts

    // Ensure the page can scroll by adding a tiny extra height
    document.documentElement.style.minHeight = 'calc(100vh + 1px)';
    document.body.style.minHeight = 'calc(100vh + 1px)';

    let attempts = 0;
    let success = false;
    let lastY = 0;

    function tryScroll() {
        attempts++;

        // Multiple strategies to nudge Safari
        window.scrollTo(0, 1);
        window.scrollBy(0, 0); // sometimes helps
        document.documentElement.scrollTop = 1;
        document.body.scrollTop = 1;

        // Wait a tick then check scroll position
        requestAnimationFrame(() => {
            const y = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;

            // If the page actually moved, assume toolbar will hide
            if (y > 0) {
                success = true;
                lastY = y;
                lockScrollKeepPosition(y);
                return;
            }

            // If not yet successful, try again up to MAX_ATTEMPTS
            if (attempts < MAX_ATTEMPTS) {
                setTimeout(tryScroll, INTERVAL);
            } else {
                // final fallback: try one last time then give up
                window.scrollTo(0, 1);
                const finalY = window.pageYOffset || document.documentElement.scrollTop || 0;
                if (finalY > 0) {
                    lockScrollKeepPosition(finalY);
                } else {
                    // Could not programmatically force toolbar hide
                    // Keep page usable and do not lock scrolling
                    console.warn('Auto-scroll did not move the page. Toolbar may remain visible.');
                }
            }
        });
    }

    function lockScrollKeepPosition(scrolledY) {
        // preserve visual position then lock scrolling
        // set top to negative scrolled amount so content does not jump
        document.body.classList.add('lock-scroll');
        document.body.style.top = `-${scrolledY}px`;

        // give the browser a moment to finish UI animation
        setTimeout(() => {
            // remove the tiny extra height we added if you want strict locking
            document.documentElement.style.minHeight = '';
            document.body.style.minHeight = '';
        }, 200);
    }

    // Start after load so layout is ready
    window.addEventListener('load', () => {
        // small delay helps on some iOS versions
        setTimeout(tryScroll, 80);
    }, {passive: true});
})();
</script>
</body>

</html>
